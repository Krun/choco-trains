camas$DVNS_ERRORTIME <- as.POSIXlt(strptime(camas$DVNS_ERRORTIME, "%Y-%m-%d %H:%M:%S"))
summary(camas$DVNS_ERRORTIME)
length(camas[,1])
17705+100321
#png("segovia_graph.png", width=1500, height=700, res=200)
#par(mfrow=c(1,3), mar=c(16,2,2,2))
png("graphs/segovia_graph.png")
barplot(tabla<-prop.table(table(segovia$EVENT_TYPE)), col=rainbow(length(names(tabla))), main="Segovia - Event type", las=3)
dev.off()
#png("antequera_graph.png", width=1500, height=700, res=200)
#par(mfrow=c(1,3), mar=c(16,2,2,2))
png("graphs/antequera_graph.png")
barplot(tabla<-prop.table(table(antequera$EVENT_TYPE)), col=rainbow(length(names(tabla))), main="antequera - Event type", las=3)
dev.off()
#png("sevilla_graph.png", width=1500, height=700, res=200)
#par(mfrow=c(1,3), mar=c(16,2,2,2))
png("graphs/sevilla_graph.png")
barplot(tabla<-prop.table(table(sevilla$EVENT_TYPE)), col=rainbow(length(names(tabla))), main="sevilla - Event type", las=3)
dev.off()
#png("segovia_graph.png", width=1500, height=700, res=200)
#par(mfrow=c(1,3), mar=c(16,2,2,2))
png("graphs/segovia_graph.png")
par(mar=c(16,2,2,2))
barplot(tabla<-prop.table(table(segovia$EVENT_TYPE)), col=rainbow(length(names(tabla))), main="", las=3)
dev.off()
#png("antequera_graph.png", width=1500, height=700, res=200)
#par(mfrow=c(1,3), mar=c(16,2,2,2))
png("graphs/antequera_graph.png")
par(mar=c(16,2,2,2))
barplot(tabla<-prop.table(table(antequera$EVENT_TYPE)), col=rainbow(length(names(tabla))), main="", las=3)
dev.off()
#png("sevilla_graph.png", width=1500, height=700, res=200)
#par(mfrow=c(1,3), mar=c(16,2,2,2))
png("graphs/sevilla_graph.png")
par(mar=c(16,2,2,2))
barplot(tabla<-prop.table(table(sevilla$EVENT_TYPE)), col=rainbow(length(names(tabla))), main="", las=3)
dev.off()
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
dev.off()
dev.off()
source('~/.active-rstudio-document', echo=TRUE)
source('~/prog/trainmining/category_charts.R', echo=TRUE)
source('~/prog/trainmining/category_charts.R', echo=TRUE)
source('~/prog/trainmining/category_charts.R', echo=TRUE)
png("graphs/sevilla_graph.png", res=150, height=1000, width=700)
source('~/.active-rstudio-document', echo=TRUE)
dev.off()
source('~/.active-rstudio-document', echo=TRUE)
if(!exists("antequera")){
source('~/prog/trainmining/fileloader.R', echo=TRUE)
if(!exists("antequera")){
antequera <- read.csv("Datos/antequera.csv", header = TRUE, sep=";")
}
if(!exists("segovia")) {
segovia <- read.csv("Datos/segovia.csv", header = TRUE, sep=";")
}
if(!exists("sevilla")){
sevilla <- read.csv("Datos/sevilla.csv", header = TRUE, sep=";")
}
if(!exists("camas")) {
camas <- read.csv("Datos/camas.csv", header = TRUE, sep=";")
}
if(!exists("errortext")) {
errortext <- read.csv("Datos/messagetexts.csv", header = TRUE, sep=";")
}
}
}
}
View(antequera)
View(antequera)
summary(antequera$DVNI_ERRORNUMBER)
summary(antequera$DVNI_ERRORCATEGORY)
source('~/.active-rstudio-document', echo=TRUE)
sevilla[sevilla$EVENT_TYPE == "FieldElementFailure",]
source('~/.active-rstudio-document', echo=TRUE)
rm(antequera)
rm(camas)
rm(segovia)
rm(sevilla)
source('~/prog/trainmining/fileloader.R', echo=TRUE)
]$EVENT_TYPE = "fieldElementFailure"
sevilla$EVENT_TYPE <- droplevels(sevilla$EVENT_TYPE)
sevilla[sevilla$EVENT_TYPE == "FieldElementFailure",]$EVENT_TYPE = "fieldElementFailure"
sevilla$EVENT_TYPE <- droplevels(sevilla$EVENT_TYPE)
antequera_all <- mergeRows(antequera,antequera_new,TRUE)
View(antequera_new)
View(antequera_new)
View(antequera)
View(antequera)
antequera$DVNI_ERRORNUMBER <- NULL
NULL -> antequera$DVNI_SENDERINSTALLATIONCODE
NULL -> antequera$MESSAGE_ID
NULL -> antequera$MESSAGE_TYPE
NULL -> antequera$INVOKE_TYPE
antequera <- read.csv("Datos/antequera.csv", header = TRUE, sep=";")
NULL -> antequera$DVNI_ERRORNUMBER
NULL -> antequera$DVNI_SENDERINSTALLATIONCODE
NULL -> antequera$MESSAGE_ID
NULL -> antequera$MESSAGE_TYPE
NULL -> antequera$INVOKE_TYPE
View(antequera)
View(antequera)
NULL -> antequera$DVNI_ERRORNUMBER
NULL -> antequera$DVNI_SENDERINSTALLATIONCODE
NULL -> antequera$MESSAGE_ID
NULL -> antequera$MESSAGE_TYPE
NULL -> antequera$INVOKE_TYPE
NULL -> antequera$DVNI_SYSTEMCODE
NULL -> antequera$DVNI_VERSION
NULL -> antequera$DVAC_SHORTNAME
NULL -> antequera$DVAC_INSTALLATIONNAME
NULL -> antequera$DVAC_LOCATION
NULL -> antequera$CHK_IS_NODE
View(antequera)
View(antequera)
NULL -> antequera$INVOKE_NAME
antequera_new <- read.csv("Datos/antequera_new.csv", header = TRUE, sep=";")
View(antequera_new)
View(antequera_new)
names(antequera_new)
rm(antequera_new)
NULL -> antequera$row.names
View(antequera)
antequera_new <- read.csv("Datos/antequera_new.csv", header = TRUE, sep=";")
View(antequera_new)
names(antequera_new)[names(antequera_new)=="X.DVNI_INSTALLATIONCODE"] <- "DVNI_INSTALLATIONCODE"
names(antequera_new)
rbind
antequera_full <- rbind(antequera, antequera_new)
rm(antequera)
source('~/.active-rstudio-document', echo=TRUE)
antequera_1 <- read.csv("Datos/antequera_1.csv", header = TRUE, sep=";")
antequera_2 <- read.csv("Datos/antequera_2.csv", header = TRUE, sep=";")
antequera <- data.frame(DVNS_ERRORTIME=antequera_1$DVNS_ERRORTIME)
antequera$DVNI_INSTALLATIONCODE <- antequera_1$DVNI_INSTALLATIONCODE
antequera$DVNI_ERRORCATEGORY <- antequera_1$DVNI_ERRORCATEGORY
antequera$ADDITIONAL_TEXT <- antequera_1$ADDITIONAL_TEXT
antequera$ADDITIONAL_INFOS <- antequera_1$ADDITIONAL_INFOS
antequera$EVENT_TYPE <- antequera$EVENT_TYPE
View(antequera)
View(antequera_2)
antequera_1 <- read.csv("Datos/antequera_1.csv", header = TRUE, sep=";")
antequera_2 <- read.csv("Datos/antequera_2.csv", header = TRUE, sep=";")
antequera <- data.frame(DVNS_ERRORTIME=antequera_1$DVNS_ERRORTIME)
antequera$DVNI_INSTALLATIONCODE <- antequera_1$DVNI_INSTALLATIONCODE
antequera$DVNI_ERRORCATEGORY <- antequera_1$DVNI_ERRORCATEGORY
antequera$ADDITIONAL_TEXT <- antequera_1$ADDITIONAL_TEXT
antequera$ADDITIONAL_INFOS <- antequera_1$ADDITIONAL_INFOS
antequera$EVENT_TYPE <- antequera_1$EVENT_TYPE
antequera_1 <- read.csv("Datos/antequera_1.csv", header = TRUE, sep=";")
antequera_2 <- read.csv("Datos/antequera_2.csv", header = TRUE, sep=";")
antequera <- data.frame(DVNS_ERRORTIME=antequera_1$DVNS_ERRORTIME)
antequera$DVNI_INSTALLATIONCODE <- antequera_1$DVNI_INSTALLATIONCODE
antequera$DVNI_ERRORCATEGORY <- antequera_1$DVNI_ERRORCATEGORY
antequera$ADDITIONAL_TEXT <- antequera_1$ADDITIONAL_TEXT
antequera$ADDITIONAL_INFOS <- antequera_1$ADDITIONAL_INFOS
antequera$EVENT_TYPE <- antequera_1$EVENT_TYPE
rm(antequera_full)
rm(antequera_new)
antequera <- rbind(antequera, antequera_2)
View(antequera_1)
View(antequera)
View(antequera_2)
names(antequera_2)[names(antequera_2)=="X.DVNI_INSTALLATIONCODE"] <- "DVNI_INSTALLATIONCODE"
antequera <- rbind(antequera, antequera_2)
rm(antequera_1)
rm(antequera_2)
summary(antequera)
levels(camas$EVENT_TYPE)
antequera_1 <- read.csv("Datos/antequera_1.csv", header = TRUE, sep=";")
antequera_2 <- read.csv("Datos/antequera_2.csv", header = TRUE, sep=";")
antequera <- antequera_1[,c("DVNI_INSTALLATIONCODE", "DVNS_ERRORTIME", "DVNI_ERRORCATEGORY", "ADDITIONAL_TEXT", "ADDITIONAL_INFOS", "EVENT_TYPE")]
names(antequera_2)[names(antequera_2)=="X.DVNI_INSTALLATIONCODE"] <- "DVNI_INSTALLATIONCODE"
antequera <- rbind(antequera, antequera_2)
rm(antequera_1)
rm(antequera_2)
rm(sevilla)
if(!exists("sevilla")){
sevilla <- read.csv("Datos/sevilla.csv", header = TRUE, sep=";")
camas <- read.csv("Datos/camas.csv", header = TRUE, sep=";")
sevilla <- rbind(sevilla,camas)
sevilla[sevilla$EVENT_TYPE == "FieldElementFailure",]$EVENT_TYPE = "fieldElementFailure"
sevilla$EVENT_TYPE <- droplevels(sevilla$EVENT_TYPE)
sevilla <- sevilla[,c("DVNI_INSTALLATIONCODE", "DVNS_ERRORTIME", "DVNI_ERRORCATEGORY", "ADDITIONAL_TEXT", "ADDITIONAL_INFOS", "EVENT_TYPE")]
rm(camas)
}
segovia_1 <- read.csv("Datos/segovia_1.csv", header = TRUE, sep=";")
segovia_2 <- read.csv("Datos/segovia_2.csv", header = TRUE, sep=";")
rm(segovia_new_2009)
View(segovia_2)
segovia_1 <- read.csv("Datos/segovia_1.csv", header = TRUE, sep=";")
segovia_2 <- read.csv("Datos/segovia_2.csv", header = TRUE, sep=";")
segovia_1 <- segovia_1[,c("DVNI_INSTALLATIONCODE", "DVNS_ERRORTIME", "DVNI_ERRORCATEGORY", "ADDITIONAL_TEXT", "ADDITIONAL_INFOS", "EVENT_TYPE")]
names(segovia_2)[names(segovia_2)=="X.DVNI_INSTALLATIONCODE"] <- "DVNI_INSTALLATIONCODE"
segovia <- rbind(segovia_1, segovia_2)
rm(antequera_1)
rm(antequera_2)
rm(segovia_1)
rm(segovia_2)
View(errortext)
View(sevilla)
View(sevilla)
View(sevilla)
View(segovia)
View(segovia)
View(segovia)
View(segovia)
View(albacete)
View(albacete)
source('~/prog/trainmining/create_baskets.R', echo=TRUE)
rm(bfile)
rm(prep_split)
rm(target)
rm(prep)
source('~/prog/trainmining/create_baskets.R', echo=TRUE)
sptest <- split(antequera,10)
rm(bfile)
rm(prep_split)
rm(target)
rm(prep)
rm(size)
rm(time)
rm(items)
rm(i)
rm(j)
rm(eventsplit)
rm(seqnum)
sptest <- split(antequera,)
target <- antequera
sptest <- split(target, factor(sort(rank(row.names(x))%%n)))
sptest <- split(target, factor(sort(rank(row.names(target))%%n)))
n <- 10
sptest <- split(target, factor(sort(rank(row.names(target))%%n)))
create_basket_file <-function(target, bfile) {
#prep <- data.frame(ERROR = paste(antequera$ADDITIONAL_TEXT,gsub(" ","_",antequera$ADDITIONAL_INFOS),sep='#'))
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(antequera$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(antequera$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
prep_split <- split(prep, prep$sequenceID)
#http://r.789695.n4.nabble.com/transaction-object-how-to-coerce-this-data-td2402613.html
options(max.print=5.5E8)
cat(file=bfile)
for(i in 1:length(prep_split)){
sameseq <- prep_split[[i]]
seqnum <- as.numeric(sameseq$sequenceID[1])
sameseq$sequenceID <- NULL
eventsplit <- split(sameseq, sameseq$eventID)
for (j in 1:length(eventsplit)){
time <- as.numeric(eventsplit[[j]]$eventID[1])
items <- as.character(eventsplit[[j]]$ERROR)
size <- length(items)
if(size > 0){
cat(file=bfile, seqnum, time, size, items, "\n", append=TRUE)
}
}
}
}
create_basket_file(segovia, "baskets/segovia.txt")
rm(target)
create_basket_file(segovia, "baskets/segovia.txt")
rm(sameseq)
create_basket_file(segovia, "baskets/segovia.txt")
create_basket_file <-function(target, bfile) {
#prep <- data.frame(ERROR = paste(antequera$ADDITIONAL_TEXT,gsub(" ","_",antequera$ADDITIONAL_INFOS),sep='#'))
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
prep_split <- split(prep, prep$sequenceID)
#http://r.789695.n4.nabble.com/transaction-object-how-to-coerce-this-data-td2402613.html
options(max.print=5.5E8)
cat(file=bfile)
for(i in 1:length(prep_split)){
sameseq <- prep_split[[i]]
seqnum <- as.numeric(sameseq$sequenceID[1])
sameseq$sequenceID <- NULL
eventsplit <- split(sameseq, sameseq$eventID)
for (j in 1:length(eventsplit)){
time <- as.numeric(eventsplit[[j]]$eventID[1])
items <- as.character(eventsplit[[j]]$ERROR)
size <- length(items)
if(size > 0){
cat(file=bfile, seqnum, time, size, items, "\n", append=TRUE)
}
}
}
}
create_basket_file(segovia,"baskets/segovia.txt")
target <- antequera
bfile = "baskets/antequera_baskets" #sin extension
#prep <- data.frame(ERROR = paste(antequera$ADDITIONAL_TEXT,gsub(" ","_",antequera$ADDITIONAL_INFOS),sep='#'))
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
prep_split <- split(prep, prep$sequenceID)
#http://r.789695.n4.nabble.com/transaction-object-how-to-coerce-this-data-td2402613.html
options(max.print=5.5E8)
cat(file=bfile)
for(i in 1:length(prep_split)){
sameseq <- prep_split[[i]]
seqnum <- as.numeric(sameseq$sequenceID[1])
sameseq$sequenceID <- NULL
eventsplit <- split(sameseq, sameseq$eventID)
for (j in 1:length(eventsplit)){
time <- as.numeric(eventsplit[[j]]$eventID[1])
items <- as.character(eventsplit[[j]]$ERROR)
size <- length(items)
if(size > 0){
cat(file=bfile, seqnum, time, size, items, "\n", append=TRUE)
}
}
}
rm(bfile)
rm(prep_split)
rm(target)
rm(prep)
rm(size)
rm(time)
rm(items)
rm(i)
rm(j)
rm(eventsplit)
rm(seqnum)
create_basket_file(antequera,"baskets/antequera.txt")
summary(segovia)
View(segovia)
target-> segovia
target<- segovia
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
View(prep)
target<-antequera
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
View(prep)
target<-segovia
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
View(prep)
View(segovia)
View(antequera)
View(segovia)
View(antequera)
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
View(prep)
View(prep)
View(prep)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
View(segovia)
View(segovia)
View(segovia)
View(segovia)
View(prep)
prep$eventID <- as.numeric(prep$eventID)
View(prep)
View(prep)
prep$eventID <- prep$eventID - min(prep$eventID)
View(prep)
View(prep)
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
summary(prep$eventID)
summary(complete.cases(prep$eventID))
summary(complete.cases(prep)$eventID)
summary(complete.cases(prep))
summary(prep[complete.cases(prep),]$eventID)
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep <- prep[complete.cases(prep),]
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep$eventID <- prep$eventID - min(prep$eventID)
View(prep)
View(prep)
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep <- prep[complete.cases(prep),]
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
summary(prep$eventID)
prep <- prep[complete.cases(prep),]
summary(prep$eventID)
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep <- prep[complete.cases(prep),]
prep$eventID <- prep$eventID - min(prep$eventID)
View(prep)
View(prep)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
View(prep)
View(prep)
prep$eventID <- as.factor(prep$eventID)
create_basket_file <-function(target, bfile) {
#prep <- data.frame(ERROR = paste(antequera$ADDITIONAL_TEXT,gsub(" ","_",antequera$ADDITIONAL_INFOS),sep='#'))
prep <- data.frame(ERROR = target$ADDITIONAL_TEXT)
prep$ERROR <- as.factor(prep$ERROR)
prep$sequenceID <- as.factor(target$DVNI_INSTALLATIONCODE)
prep$eventID <- as.factor(target$DVNS_ERRORTIME)
prep$eventID <- strptime(prep$eventID, "%Y-%m-%d %H:%M:%S")
prep$eventID <- as.numeric(prep$eventID)
prep <- prep[complete.cases(prep),]
prep$eventID <- prep$eventID - min(prep$eventID)
prep$eventID <- as.numeric(prep$eventID) %/% (60*60*24) #Pasamos de segundos a dias.
prep$eventID <- as.factor(prep$eventID)
prep <- prep[order(prep$sequenceID, prep$eventID), ]
prep <- prep[!duplicated(prep),]
prep_split <- split(prep, prep$sequenceID)
#http://r.789695.n4.nabble.com/transaction-object-how-to-coerce-this-data-td2402613.html
options(max.print=5.5E8)
cat(file=bfile)
for(i in 1:length(prep_split)){
sameseq <- prep_split[[i]]
seqnum <- as.numeric(sameseq$sequenceID[1])
sameseq$sequenceID <- NULL
eventsplit <- split(sameseq, sameseq$eventID)
for (j in 1:length(eventsplit)){
time <- as.numeric(eventsplit[[j]]$eventID[1])
items <- as.character(eventsplit[[j]]$ERROR)
size <- length(items)
if(size > 0){
cat(file=bfile, seqnum, time, size, items, "\n", append=TRUE)
}
}
}
}
create_basket_file(sevilla,"baskets/sevilla_test.txt")
length(sptest)
class(sptest[1])
class(sptest[[1])
class(sptest[[1]])
create_k_basket_files <- function(target,name,k) {
splits <- split(target, factor(sort(rank(row.names(target))%%k)))
for (i in 1:length(splits)){
single_frame <- splits[[i]]
create_basket_file(single_frame,name+i+".txt")
}
}
create_k_basket_files(antequera,"baskets/antequera_k",10)
create_k_basket_files <- function(target,name,k) {
splits <- split(target, factor(sort(rank(row.names(target))%%k)))
for (i in 1:length(splits)){
single_frame <- splits[[i]]
create_basket_file(single_frame,paste(name,i,".txt"))
}
}
create_k_basket_files(antequera,"baskets/antequera_k",10)
